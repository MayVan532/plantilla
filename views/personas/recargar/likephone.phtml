<div class="personas-main-content" style="background:#ffffff;">
  <?php if (isset($_GET['debugcms']) && $_GET['debugcms']=='1') { ?>
    <?php if (isset($this->debug_bloque65)) { ?>
      <pre style="background:#f8fafc;border:1px solid #e2e8f0;color:#0f172a;font-size:12px;padding:10px;border-radius:6px;margin:10px 0;white-space:pre-wrap;">B65: <?php echo htmlspecialchars(json_encode($this->debug_bloque65, JSON_PRETTY_PRINT|JSON_UNESCAPED_SLASHES)); ?></pre>
    <?php } ?>
    <?php if (isset($this->debug_bloque66)) { ?>
      <pre style="background:#f8fafc;border:1px solid #e2e8f0;color:#0f172a;font-size:12px;padding:10px;border-radius:6px;margin:10px 0;white-space:pre-wrap;">B66: <?php echo htmlspecialchars(json_encode($this->debug_bloque66, JSON_PRETTY_PRINT|JSON_UNESCAPED_SLASHES)); ?></pre>
    <?php } ?>
  <?php } ?>
  <!-- BANNER -->
  <?php if (!empty($this->rec_banner)) { ?>
  <div style="position: relative; max-width: 100%; overflow: hidden; margin-top: 0;">
      <div style="display: block; width: 100%;">
          <?php $href = isset($this->rec_banner_link) ? trim((string)$this->rec_banner_link) : ''; ?>
          <?php if ($href) { ?><a href="<?php echo htmlspecialchars($href); ?>" style="display:block;"><?php } ?>
          <img src="<?php echo htmlspecialchars($this->rec_banner); ?>" 
              style="width: 100%; height: 300px; object-fit: cover; display: block;">
          <?php if ($href) { ?></a><?php } ?>
      </div>
  </div>
  <?php } else { ?>
  <div style="position: relative; max-width: 100%; overflow: hidden; margin-top: 0; min-height: 300px; border-radius:12px; background:linear-gradient(180deg,#eef5fb 0%,#e6eef7 100%); border:1px solid #d9e5f0; box-shadow:0 6px 18px rgba(15, 23, 42, 0.05);"></div>
  <?php } ?>
  
    <?php
        $byType = isset($this->Recargalikes) && is_array($this->Recargalikes) ? $this->Recargalikes : [];

        $recarga = [
        'titulo'    => $byType['titulo'][0]    ?? null,
        'subtitulo' => $byType['subtitulo'][0] ?? null,
        'texto'     => $byType['texto'][0]     ?? null,
        'btn'       => $byType['boton'][0]     ?? null,
        'img'       => $byType['imagen'][0]    ?? null,
        ];
    ?>

    <?php
        // Debug ligero de la API de planes (no afecta el dise√±o, solo se muestra si se pide por querystring)
        if (isset($_GET['debugcms']) && $_GET['debugcms'] == '1') {
            $planesDebug = isset($this->planesSocioDebug) ? $this->planesSocioDebug : null;
            $planesData  = isset($this->planesSocio) && is_array($this->planesSocio) ? $this->planesSocio : [];
    ?>
        <div style="max-width:1200px; margin:20px auto; padding:14px 18px; background:#f8fafc; color:#0f172a; font-size:12px; font-family:monospace; border-radius:8px; border:1px solid #e2e8f0; box-shadow:0 8px 20px rgba(15,23,42,0.08);">
            <div style="font-weight:bold; margin-bottom:4px; color:#16a34a;">DEBUG API PLANES (solo visible con ?debugcms=1)</div>
            <div style="margin-bottom:6px;">planesSocio count: <?php echo count($planesData); ?></div>

            <div style="font-weight:bold; margin-top:4px; margin-bottom:2px;">LOG interno (planesSocioDebug):</div>
            <pre style="margin-top:2px; padding:10px 12px; background:#ffffff; color:#111827; border-radius:6px; white-space:pre-wrap; max-height:180px; overflow:auto; font-size:11px; line-height:1.5;">
<?php echo htmlspecialchars(json_encode($planesDebug, JSON_PRETTY_PRINT | JSON_UNESCAPED_SLASHES)); ?>
            </pre>

            <div style="font-weight:bold; margin-top:10px; margin-bottom:2px;">Datos de planes (planesSocio usados en las cards):</div>
            <pre style="margin-top:2px; padding:10px 12px; background:#ffffff; color:#111827; border-radius:6px; white-space:pre-wrap; max-height:260px; overflow:auto; font-size:11px; line-height:1.5;">
<?php echo htmlspecialchars(json_encode($planesData, JSON_PRETTY_PRINT | JSON_UNESCAPED_SLASHES)); ?>
            </pre>
        </div>
    <?php
        }
    ?>

    <section class="about-section homeresponsive" style="padding: 60px 20px; background-color: #f9f9f9;">
        <div class="auto-container" style="max-width: 1200px; margin: auto;">
            <div class="row text-center">
                <div class="content-column col-lg-12 col-md-12 col-sm-12">
    <section class="pricing-section alternate" style="padding: 30px 0 0px; background: none; border: none;">
        <div class="auto-container">
            <style>
                /* Cards layout like the provided design */
                .about-section .pricing-section { 
                font-family: "Segoe UI", Helvetica, Arial, sans-serif; 
                }
                .about-section .auto-container {
                    max-width: 100% !important; /* Use full width */
                    padding: 0 30px !important; /* Add side padding */
                    margin: 0 auto;
                }
                .about-section .pricing-section .row {
                display: grid;
                grid-template-columns: repeat(3, 1fr); /* 3 columns on desktop */
                gap: 20px; /* un poco menos de espacio entre cards */
                margin-left: 0;
                margin-right: 0;
                }
                .about-section .pricing-block {
                padding-left: 0 !important;
                padding-right: 0 !important;
                }
                .about-section .pricing-block .inner-box {
                    display: flex;
                    flex-direction: column;
                    background: #ffffff;
                    border-radius: 12px;
                    border: 1px solid #f1f5f9;
                    box-shadow: 0 8px 22px rgba(15,23,42,0.10);
                    overflow: hidden;
                    transition: box-shadow .22s ease, transform .22s ease;
                    position: relative;
                }
                .about-section .pricing-block .inner-box:hover {
                    transform: translateY(-4px);
                    box-shadow: 0 16px 34px rgba(15,23,42,0.18);
                }
                .about-section .pricing-block .upper-box {
                    display: flex;
                    flex-direction: column;
                    align-items: center; /* Centrar contenido del header */
                    justify-content: center;
                    gap: 2px;
                    padding: 10px 18px 8px 18px;
                    background: #ffffff;
                    border-bottom: 1px solid #f1f5f9;
                    order: 1; /* Header primero */
                    font-size: 12px;
                    font-weight: 500;
                    color: #556270; /* Muted gray for meta */
                }
                .about-section .pricing-block .upper-box .title {
                    display: flex !important;
                    align-items: center;
                    gap: 8px;
                    font-size: 11px !important;
                    font-weight: 500 !important;
                    color: #64748b !important;
                    text-transform: uppercase;
                    letter-spacing: 0.08em;
                }
                .about-section .pricing-block .upper-box .price {
                    display: none; /* Hide original price from top */
                }
                .about-section .pricing-block .upper-box p {
                    display: flex;
                    align-items: center;
                    gap: 4px;
                    margin: 0 !important;
                    font-size: 12px !important;
                    color: #0f172a !important;
                    font-weight: 500 !important;
                }
                .about-section .pricing-block center {
                    line-height: 0;
                    order: 2; /* Imagen debajo del header */
                }
                .about-section .pricing-block center img {
                    width: 100% !important;
                    height: 160px !important; /* antes 180 */
                    object-fit: cover;
                    display: block;
                }
                .about-section .pricing-block .lower-content {
                padding: 0 18px 14px 18px !important;
                background: #fff;
                order: 3;
                }
                .about-section .pricing-block .lower-content .text {
                    margin: 8px 0 12px 0; /* un poco menos de espacio */
                    font-size: 13px;
                    color: #1e293b; /* Slate */
                    line-height: 1.6;
                    font-weight: 500;
                    min-height: 80px; /* reduce altura m√≠nima */
                    text-align: justify;
                }
                .about-section .pricing-block .btn-box {
                position: relative;
                display: flex;
                align-items: center;
                justify-content: space-between;
                gap: 6px;
                padding: 12px 0 0 0;
                margin-top: 12px;
                border-top: 1px solid #f0f2f5; /* Separator line */
                }
                .about-section .pricing-block .btn-box .price-footer {
                    font-size: 22px;
                    font-weight: 700;
                    color: #005A6A; /* Dark Teal color */
                }
                .about-section .pricing-block .btn-box .theme-btn {
                    display: inline-block;
                    padding: 10px 26px;
                    border-radius: 10px;
                    font-size: 15px;
                    font-weight: 600;
                    box-shadow: 0 8px 18px rgba(0,180,196,0.40);
                    border: none;
                    cursor: pointer;
                    transition: transform .22s ease, box-shadow .22s ease, opacity .22s ease;
                }
                .about-section .pricing-block .btn-box .theme-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 12px 26px rgba(0,180,196,0.50);
                    opacity: 0.96;
                }
                .about-section .pricing-block .btn-box .btn-naranja {
                    background: #00C8D7; /* Turquesa principal */
                    color: #fff;
                }
                .about-section .pricing-block .btn-box .btn-rosa {
                    background: #00B4C4; /* Turquesa ligeramente m√°s oscuro/variaci√≥n */
                    color: #fff;
                }
                @media (max-width: 991px) { /* Tablet */
                .about-section .row.cards-row {
                    grid-template-columns: repeat(2, 1fr);
                }
                }
                @media (max-width: 767px) { /* Mobile: horizontal scroll */
                /* Pricing cards scroller */
                .about-section .pricing-section .row.cards-row {
                    display: flex !important;
                    flex-wrap: nowrap !important;
                    overflow: hidden !important; /* hide native scroll */
                    gap: 16px !important;
                    padding: 6px 10px 12px !important;
                    scroll-snap-type: x mandatory;
                    -webkit-overflow-scrolling: auto;
                    scroll-behavior: smooth;
                    -ms-overflow-style: none; /* IE/Edge */
                    scrollbar-width: none;     /* Firefox */
                    touch-action: none;        /* disable swipe */
                }
                .about-section .pricing-section .row.cards-row::-webkit-scrollbar { height: 0; width: 0; }
                .about-section .pricing-section .row.cards-row::-webkit-scrollbar-thumb { background: transparent; }
                .about-section .pricing-section .row.cards-row > .pricing-block {
                    flex: 0 0 95% !important;
                    min-width: 300px !important;
                    max-width: 480px !important;
                    scroll-snap-align: start;
                }
                .about-section .pricing-block center img { height: 160px !important; }
                .about-section .pricing-block .lower-content .text { min-height: 0; font-size: 16px; }

                /* Mobile arrow controls */
                .pricing-section { position: relative; }
                .pricing-section .mobile-cards-nav {
                    position: absolute; inset: 0; pointer-events: none;
                }
                .pricing-section .mobile-cards-btn {
                    position: absolute; top: 25%; transform: translateY(-50%);
                    width: 38px; height: 38px; border-radius: 50%;
                    background: rgba(15,23,42,0.75); color:#fff; border:0;
                    display:flex; align-items:center; justify-content:center;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
                    cursor: pointer; pointer-events: all; z-index: 5;
                }
                .pricing-section .mobile-cards-btn.prev { left: -8px; }
                .pricing-section .mobile-cards-btn.next { right: -8px; }

                /* Beneficios: forzar 1 columna en m√≥vil (override inline grid) */
                .about-section .container > div[style*="grid-template-columns"] {
                    grid-template-columns: 1fr !important;
                }
                }
            </style>
    
    
        <?php
            $cardsPlanes = isset($this->planesSocio) && is_array($this->planesSocio) ? $this->planesSocio : [];
        ?>
        <div class="row cards-row">
            <?php if (!empty($cardsPlanes)) { ?>
                <?php foreach ($cardsPlanes as $idx => $p) {
                    $nombre = isset($p['nombre_comercial']) ? trim($p['nombre_comercial']) : '';
                    $vig    = isset($p['vigencia']) ? trim($p['vigencia']) : '';
                    $datos  = isset($p['datos']) ? trim($p['datos']) : '';
                    $monto  = isset($p['monto']) ? trim($p['monto']) : '';
                    $ticket = isset($p['ticket']) ? trim($p['ticket']) : '';
                    $offId  = isset($p['offeringId']) ? trim($p['offeringId']) : '';
                    // Imagen: preferir imagen_web2 y fallback a imagen_web1
                    $imgRel = '';
                    if (!empty($p['imagen_web2'])) { $imgRel = trim($p['imagen_web2']); }
                    elseif (!empty($p['imagen_web1'])) { $imgRel = trim($p['imagen_web1']); }
                    $imgUrl = $imgRel !== '' ? 'https://crm.likephone.mx/public/img/'.rawurlencode($imgRel) : '';
                    // Alternar estilos de bloque y bot√≥n
                    $blockClass = ($idx % 2 === 1) ? 'pricing-block style-two wow fadeInRight' : 'pricing-block wow fadeInLeft';
                    $btnClass   = ($idx % 2 === 1) ? 'btn-rosa' : 'btn-naranja';
                ?>
                <div class="<?php echo $blockClass; ?>">
                    <div class="inner-box">
                        <center>
                            <?php if ($imgUrl !== '') { ?>
                                <img src="<?php echo htmlspecialchars($imgUrl); ?>" alt="<?php echo htmlspecialchars($nombre); ?>" alt="centered image">
                            <?php } ?>
                        </center>
                        <div class="upper-box">
                            <div class="title">üì±
                            <?php if ($nombre !== '') { ?>
                                <div style="width:100%; text-align:center; font-size: 20px; font-weight: 800; margin-top: 2px; color: #00C8D7;">
                                    <?php echo htmlspecialchars($nombre); ?>
                                </div>
                            <?php } ?>
                            </div>
                            <p>
                                <?php if ($vig !== '') { ?>üóìÔ∏è Vigencia <?php echo htmlspecialchars($vig); ?> d√≠as<?php } ?>
                            </p>
                        </div>

                        <div class="lower-content">
                            <div class="text">
                                <?php
                                    if ($ticket !== '') {
                                        echo htmlspecialchars($ticket);
                                    } elseif ($datos !== '' || $vig !== '') {
                                        $parts = [];
                                        if ($vig !== '') { $parts[] = 'Vigencia '.$vig.' d√≠as'; }
                                        if ($datos !== '') { $parts[] = $datos.' MB de datos'; }
                                        echo htmlspecialchars(implode(', ', $parts));
                                    } else {
                                        echo htmlspecialchars($nombre);
                                    }
                                ?>
                            </div>

                            <div class="btn-box tooltip-container">
                                <div class="price-footer">
                                    <?php if ($monto !== '') { ?>
                                        $<?php echo htmlspecialchars(number_format((float)$monto, 2, '.', '')); ?>
                                    <?php } ?>
                                </div>
                                <a href="javascript:void(0)"
                                   class="<?php echo $btnClass; ?> extend-new-recurso theme-btn btn-style-two"
                                   data-toggle="modal" data-target=".nuevo"
                                   data-oferta="<?php echo htmlspecialchars($offId); ?>"
                                   data-costo="<?php echo htmlspecialchars($monto); ?>"
                                   data-titulo="<?php echo htmlspecialchars($nombre.' $'.$monto.' '.$vig.' d√≠as'); ?>">
                                    <span class="btn-title">Recargar</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <?php } ?>
            <?php } ?>
        </div>

               
                <script>
                    document.addEventListener('DOMContentLoaded', function(){
                    var mm = window.matchMedia('(max-width: 767px)');
                    var scroller, items, timer;
                    var prevBtn = document.querySelector('.pricing-section .mobile-cards-btn.prev');
                    var nextBtn = document.querySelector('.pricing-section .mobile-cards-btn.next');
                    function cards(){ return scroller ? Array.prototype.slice.call(scroller.children) : []; }
                    function currentIndex(){
                        var c = cards(); if (!c.length) return 0;
                        var sl = scroller.scrollLeft; var idx = 0;
                        for (var i=0;i<c.length;i++){ if (c[i].offsetLeft - sl > 2) { idx = i; break; } if (i===c.length-1) idx = 0; }
                        return idx;
                    }
                    function go(i){
                        var c = cards(); if (!c.length) return;
                        var n = c.length; var idx = ((i % n) + n) % n;
                        var target = c[idx]; if (!target) return;
                        scroller.scrollTo({ left: target.offsetLeft, behavior: 'smooth' });
                    }
                    function next(){ go(currentIndex() + 1); }
                    function prev(){ go(currentIndex() - 1); }
                    function start(){
                        stop();
                        if (!mm.matches) return;
                        scroller = document.querySelector('.about-section .pricing-section .row.cards-row');
                        if (!scroller) return;
                        items = cards();
                        if (!items.length) return;
                        timer = setInterval(next, 3000);
                        if (prevBtn) prevBtn.onclick = function(){ stop(); prev(); timer = setInterval(next, 3000); };
                        if (nextBtn) nextBtn.onclick = function(){ stop(); next(); timer = setInterval(next, 3000); };
                    }
                    function stop(){ if (timer) { clearInterval(timer); timer = null; } }
                    start();
                    if (mm.addEventListener) mm.addEventListener('change', function(){ stop(); start(); });
                    window.addEventListener('resize', function(){ stop(); start(); });
                    });
                </script>

                    <?php $recargaEmpty = empty($recarga['titulo']) && empty($recarga['texto']) && empty($recarga['btn']); ?>
                    <?php if (!$recargaEmpty) { ?>

                    <!-- Imagen opcional -->
                    <?php if (!empty($recarga['img'])) { ?>
                    <div style="max-width: 980px; margin: 28px auto 0; padding: 0 10px; text-align:center;">
                        <img src="<?php echo htmlspecialchars($recarga['img']); ?>" alt="Recargar Likes"
                            style="width:100%; max-width: 420px; height:auto; display:inline-block; filter: drop-shadow(0 18px 40px rgba(2, 12, 27, 0.14));">
                    </div>
                    <?php } ?>

                    <!-- T√≠tulo, subt√≠tulo y texto -->
                    <div class="sec-title" style="max-width: 980px; margin: 26px auto 0; padding: 28px 22px; font-family:'Montserrat', sans-serif; text-align:center; background:#ffffff; border:1px solid rgba(15, 23, 42, 0.10); border-radius:16px; box-shadow:0 18px 50px rgba(2, 12, 27, 0.10);">
                        <?php if ($recarga['titulo']) { ?>
                        <h2 class="h2-title-home2" style="margin: 0 0 10px; font-size: 36px; font-weight: 900; letter-spacing: 0.2px; color: #0ea5a6; line-height:1.15;">
                            <?php echo $recarga['titulo']; ?>
                        </h2>
                        <?php } ?>

                        <?php if (!empty($recarga['subtitulo'])) { ?>
                        <div class="subtitle" style="font-size: 17px; line-height: 1.6; color: #0f172a; font-weight: 600; margin: 4px auto 10px; max-width: 760px;">
                            <?php echo $recarga['subtitulo']; ?>
                        </div>
                        <?php } ?>

                        <?php if ($recarga['texto']) { ?>
                        <div class="text" style="font-size: 15px; line-height: 1.85; color: #526170; font-weight: 500; max-width: 760px; margin: 0 auto;">
                            <?php echo $recarga['texto']; ?>
                        </div>
                        <?php } ?>
                    </div>
                    <!-- Bot√≥n destacado -->
                    <?php if ($recarga['btn']) { ?>
                    <div style="margin-top: 16px; text-align:center;">
                        <a href="<?php echo BASE_URL . 'recargas'; ?>"
                            class="boton-v1"
                            style="background:linear-gradient(180deg,#17a2b8 0%,#1094a8 100%); color:#fff; text-decoration:none; padding:14px 30px; border-radius:10px; font-weight:800; font-size:13px; letter-spacing:0.8px; text-transform:uppercase; display:inline-flex; align-items:center; justify-content:center; min-width:220px; transition:background 0.25s ease, transform 0.15s ease, box-shadow 0.25s ease; border:1px solid rgba(2, 12, 27, 0.10); box-shadow:0 14px 30px rgba(16,148,168,0.20);"
                            onmouseover="this.style.background='linear-gradient(180deg,#128a99 0%,#0c7f92 100%)'; this.style.transform='translateY(-1px)'; this.style.boxShadow='0 18px 36px rgba(16,148,168,0.24)';"
                            onmouseout="this.style.background='linear-gradient(180deg,#17a2b8 0%,#1094a8 100%)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 14px 30px rgba(16,148,168,0.20)';">
                            <?php echo $recarga['btn']; ?>
                        </a>
                    </div>
                    <?php } ?>
                    <?php } ?>
                </div>


            </div>
        </div>

        
    </section>



  <?php 
   // seccion final de la paginas
    $gif = isset($this->rec_gif_textos) && is_array($this->rec_gif_textos) ? $this->rec_gif_textos : [];
    $lk_img = $gif['imagen'][0] ?? null;
    $lk_tit = $gif['titulo'][0] ?? null;
    $lk_sub = $gif['subtitulo'][0] ?? null;
    $lk_txt = $gif['texto'][0] ?? null;
    $lk_has = $lk_img || $lk_tit || $lk_sub || $lk_txt;
  ?>
  <?php if ($lk_has) { ?>
  <div style="display:flex;align-items:center;justify-content:center;gap:44px;max-width:1150px;margin:auto;padding:46px 40px;flex-wrap:wrap;background:#f8fafc;border-radius:28px;box-shadow:0 14px 36px rgba(15,23,42,0.07);">
    <div style="flex:1;display:flex;justify-content:center;align-items:center;position:relative;min-width:300px;">
      <?php if (!empty($lk_img)) { ?>
      <img src="<?php echo htmlspecialchars($lk_img); ?>" alt="" style="max-width:480px;width:100%;height:auto;display:block;filter:drop-shadow(0 8px 16px rgba(0,0,0,0.1));" />
      <?php } ?>
    </div>
    <div style="flex:1;min-width:320px;padding:26px 34px;border-radius:24px;background:#ffffff;box-shadow:0 14px 32px rgba(15,23,42,0.06);max-width:540px;">
      <?php if (!empty($lk_tit)) { ?>
      <div style="color:#111111;font-size:14px;font-weight:600;letter-spacing:0.14em;text-transform:uppercase;margin-bottom:12px;">
        <?php echo htmlspecialchars($lk_tit); ?>
      </div>
      <?php } ?>
      <?php if (!empty($lk_sub)) { ?>
      <h1 style="font-size:36px;margin:0 0 18px 0;line-height:1.15;font-weight:700;color:#0099a8;letter-spacing:-0.01em;">
        <?php echo htmlspecialchars($lk_sub); ?>
      </h1>
      <?php } ?>
      <?php if (!empty($lk_txt)) { ?>
      <div style="margin-top:8px;color:#475569;font-size:17px;line-height:1.9;">
        <?php echo nl2br(htmlspecialchars($lk_txt)); ?>
      </div>
      <?php } ?>
    </div>
  </div>
  <?php } ?>

</div>  